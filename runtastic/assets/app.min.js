jQuery(function(a){var b="http://intense-bastion-3210.herokuapp.com";App=Ember.Application.create(),App.Router.map(function(){this.resource("runs",{path:"/:page/:sort/:order/:detail"})}),App.RunsRoute=Ember.Route.extend({model:function(c){var d=[],e=this;return a("#loading").show(),Ember.$.getJSON(b+"/run_sessions.json?page="+c.page+"&sort_by="+c.sort+"&order="+c.order,function(f){a.each(f.run_sessions,function(a,b){d.pushObject(b)}),c.detail>0?Ember.$.getJSON(b+"/run_sessions/"+c.detail+".json",function(b){e.get("controller").send("opendetail",b),a("#loading").hide()}):(e.get("controller").send("closedetail"),a("#loading").hide()),e.get("controller").params=c,e.get("controller").send("pagination",f.meta.pagination),a("#th-"+c.sort).addClass(c.order)}),d}}),App.IndexRoute=Ember.Route.extend({beforeModel:function(){this.transitionTo("runs",1,"start_time","desc",0)}}),App.RunsController=Ember.Controller.extend({detailView:!1,actions:{opendetail:function(a){this.set("detailView",!0),this.set("detailData",a)},closedetail:function(){this.set("detailView",!1)},viewDetail:function(a){var b=this.params;this.transitionToRoute("runs",b.page,b.sort,b.order,a)},pagination:function(a){a.showPrev=1==a.page?!1:!0,a.showNext=a.page==a.available_pages?!1:!0,this.set("pagination",a)},gotoPage:function(a,b){var c=this.params,a=parseInt(a),d=1;d="prev"==b?a-1:"next"==b?a+1:a,this.transitionToRoute("runs",d,c.sort,c.order,0)},sortTable:function(b){var c=this.params,d="desc";a("th").removeClass(),d=c.sort==b?"desc"==c.order?"asc":"desc":c.order,this.transitionToRoute("runs",c.page,b,d,0)}}}),App.RunsView=Ember.View.extend({MapView:Ember.View.extend({templateName:"map",didInsertElement:function(){var b=this.get("controller").detailData.run_session.encoded_trace;if(b){a("#map").show();var c,d=[],e=google.maps.geometry.encoding.decodePath(b);a.each(e,function(a,b){d.push([b.k,b.D])}),c=new GMaps({div:"#map",lat:d[0][0],lng:d[0][1]}),c.drawPolyline({path:d,strokeColor:"#ff6d6d",strokeOpacity:1,strokeWeight:5})}}})}),Ember.Handlebars.helper("datetime",function(a){var b;return b=a?new moment(a.substring(0,19)+"Z").format("DD/MM/YYYY, HH:mm"):"N.A.",new Ember.Handlebars.SafeString(b)}),Ember.Handlebars.helper("readableduration",function(a){var b=864e5,c=36e5,d=Math.floor(a/b),e=Math.floor((a-d*b)/c),f=Math.round((a-d*b-e*c)/6e4);60===f&&(e++,f=0),24===e&&(d++,e=0);var g="";return e>0&&(g+=e,g+=e>1?" Hours":" Hour"),f>0&&(g+=" "+f,g+=f>1?" Minutes":" Minute"),new Ember.Handlebars.SafeString(g)})}),Ember.TEMPLATES.map=Ember.Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){d.buffer.push('<div id="map" style="display:none; height:300px;">map</div>')},useData:!0}),Ember.TEMPLATES.runs=Ember.Handlebars.template({1:function(a,b,c,d){var e,f=this.escapeExpression,g=b.helperMissing,h="";return d.buffer.push('	<div id="detailview">\n		<div class="dialog">\n			<a id="detailclose" '),d.buffer.push(f(b.action.call(a,"viewDetail",0,{name:"action",hash:{},hashTypes:{},hashContexts:{},types:["STRING","NUMBER"],contexts:[a,a],data:d}))),d.buffer.push('><i class="fa fa-times"></i></a>\n			'),d.buffer.push(f(b.view.call(a,"view.MapView",{name:"view",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}))),d.buffer.push(' \n			<div class="keywrap">\n				<div class="key key1">\n					<i class="fa fa-clock-o"></i>\n					<h4>Duration</h4>\n					<h3>'),d.buffer.push(f((b.readableduration||a&&a.readableduration||g).call(a,"detailData.run_session.duration",{name:"readableduration",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}))),d.buffer.push('</h3>\n				</div>\n				<div class="key key2">\n					<i class="fa fa-road"></i>\n					<h4>Distance</h4>\n					<h3>'),e=b._triageMustache.call(a,"detailData.run_session.distance",{name:"_triageMustache",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push('</h3>\n				</div>\n				<hr>\n				<div class="key key1">\n					<h4>Start on</h4>\n					<h3>'),d.buffer.push(f((b.datetime||a&&a.datetime||g).call(a,"detailData.run_session.start_time",{name:"datetime",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}))),d.buffer.push('</h3>\n				</div>\n				<div class="key key2">\n					<h4>End on</h4>\n					<h3>'),d.buffer.push(f((b.datetime||a&&a.datetime||g).call(a,"detailData.run_session.end_time",{name:"datetime",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}))),d.buffer.push("</h3>\n				</div>\n			</div>\n		</div>\n	</div>\n"),h},3:function(a,b,c,d){var e=this.escapeExpression,f="";return d.buffer.push("<a "),d.buffer.push(e(b.action.call(a,"gotoPage","pagination.page","prev",{name:"action",hash:{},hashTypes:{},hashContexts:{},types:["STRING","ID","STRING"],contexts:[a,a,a],data:d}))),d.buffer.push('><i class="fa fa-chevron-circle-left"></i></a>'),f},5:function(a,b,c,d){var e=this.escapeExpression,f="";return d.buffer.push("<a "),d.buffer.push(e(b.action.call(a,"gotoPage","pagination.page","next",{name:"action",hash:{},hashTypes:{},hashContexts:{},types:["STRING","ID","STRING"],contexts:[a,a,a],data:d}))),d.buffer.push('><i class="fa fa-chevron-circle-right"></i></a>'),f},7:function(a,b,c,d){var e,f=this.escapeExpression,g=b.helperMissing,h="";return d.buffer.push("		<tr "),d.buffer.push(f(b.action.call(a,"viewDetail","run.id",{name:"action",hash:{},hashTypes:{},hashContexts:{},types:["STRING","ID"],contexts:[a,a],data:d}))),d.buffer.push(" >\n			<td>"),e=b._triageMustache.call(a,"run.id",{name:"_triageMustache",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push(" </td>\n			<td>"),d.buffer.push(f((b.datetime||a&&a.datetime||g).call(a,"run.start_time",{name:"datetime",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}))),d.buffer.push("</td>\n			<td>"),d.buffer.push(f((b.datetime||a&&a.datetime||g).call(a,"run.end_time",{name:"datetime",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}))),d.buffer.push("</td>\n			<td>"),d.buffer.push(f((b.readableduration||a&&a.readableduration||g).call(a,"run.duration",{name:"readableduration",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}))),d.buffer.push("</td>\n			<td>"),e=b["if"].call(a,"run.encoded_trace",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:this.program(8,d),inverse:this.noop,types:["ID"],contexts:[a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push(" "),e=b._triageMustache.call(a,"run.distance",{name:"_triageMustache",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push("</td>\n			<td>"),e=b._triageMustache.call(a,"run.sport_type_id",{name:"_triageMustache",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push("</td>\n		</tr>\n"),h},8:function(a,b,c,d){d.buffer.push('<i class="fa fa-map-marker"></i>')},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.escapeExpression,g="";return d.buffer.push('<h1 class="apptitle">My running sessions</h1> \n\n'),e=b["if"].call(a,"detailView",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:this.program(1,d),inverse:this.noop,types:["ID"],contexts:[a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push('\n<div class="pagination">\n'),e=b["if"].call(a,"pagination.showPrev",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:this.program(3,d),inverse:this.noop,types:["ID"],contexts:[a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push("\n<span>Page "),e=b._triageMustache.call(a,"pagination.page",{name:"_triageMustache",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push(" of "),e=b._triageMustache.call(a,"pagination.available_pages",{name:"_triageMustache",hash:{},hashTypes:{},hashContexts:{},types:["ID"],contexts:[a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push("</span>\n"),e=b["if"].call(a,"pagination.showNext",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:this.program(5,d),inverse:this.noop,types:["ID"],contexts:[a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push('\n</div>\n\n<table id="maintable" border="0">\n	<thead>\n		<tr>\n			<th '),d.buffer.push(f(b.action.call(a,"sortTable","id",{name:"action",hash:{},hashTypes:{},hashContexts:{},types:["STRING","STRING"],contexts:[a,a],data:d}))),d.buffer.push(' id="th-id">ID</th>\n			<th '),d.buffer.push(f(b.action.call(a,"sortTable","start_time",{name:"action",hash:{},hashTypes:{},hashContexts:{},types:["STRING","STRING"],contexts:[a,a],data:d}))),d.buffer.push(' id="th-start_time">Start</th>\n			<th '),d.buffer.push(f(b.action.call(a,"sortTable","end_time",{name:"action",hash:{},hashTypes:{},hashContexts:{},types:["STRING","STRING"],contexts:[a,a],data:d}))),d.buffer.push(' id="th-end_time">End</th>\n			<th '),d.buffer.push(f(b.action.call(a,"sortTable","duration",{name:"action",hash:{},hashTypes:{},hashContexts:{},types:["STRING","STRING"],contexts:[a,a],data:d}))),d.buffer.push(' id="th-duration">Duration</th>\n			<th '),d.buffer.push(f(b.action.call(a,"sortTable","distance",{name:"action",hash:{},hashTypes:{},hashContexts:{},types:["STRING","STRING"],contexts:[a,a],data:d}))),d.buffer.push(' id="th-distance">Distance</th>\n			<th '),d.buffer.push(f(b.action.call(a,"sortTable","sport_type_id",{name:"action",hash:{},hashTypes:{},hashContexts:{},types:["STRING","STRING"],contexts:[a,a],data:d}))),d.buffer.push(' id="th-sport_type_id">Sport Type</th>\n		</tr>\n	</thead>\n	<tbody>\n'),e=b.each.call(a,"run","in","model",{name:"each",hash:{},hashTypes:{},hashContexts:{},fn:this.program(7,d),inverse:this.noop,types:["ID","ID","ID"],contexts:[a,a,a],data:d}),null!=e&&d.buffer.push(e),d.buffer.push('	<tbody>\n</table>\n\n\n<a href="/#" id="resetbutton">reset</a>\n<div id="loading"><i class="fa fa-refresh fa-spin fa-2x"></i></div>\n     '),g},useData:!0});